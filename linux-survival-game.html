<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Linux Survival Game</title>

<style>
  body {
    background: #000;
    color: #00ff00;
    font-family: monospace;
    margin: 0;
    padding: 20px;
  }
  .terminal {
    max-width: 900px;
    margin: auto;
    border: 2px solid #00ff00;
    padding: 20px;
    min-height: 400px;
  }
  .line {
    margin: 6px 0;
  }
  .prompt {
    color: #00ff00;
  }
  input {
    background: #000;
    color: #00ff00;
    border: none;
    outline: none;
    font-family: monospace;
    width: 60px;
  }
  button {
    background: #000;
    color: #00ff00;
    border: 1px solid #00ff00;
    padding: 10px 20px;
    cursor: pointer;
    font-family: monospace;
    margin-top: 20px;
  }
  button:hover {
    background: #00ff00;
    color: #000;
  }
</style>

</head>
<body>

<div class="terminal" id="terminal"></div>

<script>
const terminal = document.getElementById("terminal");

let score = 0;
let step = 0;

const incidents = [
  {
    q: "ðŸš¨ Disk is 100% full. What do you do first?",
    o: ["rm -rf /", "df -h", "shutdown -h now"],
    c: 2
  },
  {
    q: "ðŸš¨ Apache service is DOWN. Correct command?",
    o: ["kill -9 httpd", "systemctl restart httpd", "reboot"],
    c: 2
  },
  {
    q: "ðŸš¨ CPU usage is very high. First step?",
    o: ["top", "rm -rf /tmp", "poweroff"],
    c: 1
  },
  {
    q: "ðŸš¨ SSH login failing. What will you check?",
    o: ["chmod 777 /etc/shadow", "systemctl status sshd", "delete users"],
    c: 2
  }
];

function clearScreen() {
  terminal.innerHTML = "";
}

function printLine(text) {
  const div = document.createElement("div");
  div.className = "line";
  div.textContent = text;
  terminal.appendChild(div);
}

function showQuestion() {
  clearScreen();

  const i = incidents[step];

  printLine("Linux Survival Game");
  printLine("-----------------------------");
  printLine(i.q);
  printLine("");

  i.o.forEach((opt, idx) => {
    printLine(`${idx + 1}) ${opt}`);
  });

  printLine("");
  printLine("ðŸ‘‰ Please select the correct answer (1/2/3 and press Enter)");
  printPrompt();
}

function printPrompt() {
  const div = document.createElement("div");
  div.className = "line";
  div.innerHTML = `<span class="prompt">admin@prod ~$</span> <input id="cmd" autofocus>`;
  terminal.appendChild(div);

  const input = document.getElementById("cmd");
  input.focus();

  input.addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
      const choice = parseInt(input.value);
      handleAnswer(choice);
    }
  });
}

function handleAnswer(choice) {
  if (choice === incidents[step].c) {
    score++;
  }

  step++;

  if (step < incidents.length) {
    setTimeout(showQuestion, 300);
  } else {
    showResult();
  }
}

function showResult() {
  clearScreen();

  printLine("ðŸŽ¯ Game Over");
  printLine("-----------------------------");
  printLine(`Your Score: ${score} / ${incidents.length}`);
  printLine("");

  if (score === incidents.length) {
    printLine("ðŸ† Legendary Linux Admin!");
  } else if (score >= 2) {
    printLine("ðŸ‘ Good job! Production survived.");
  } else {
    printLine("âš ï¸ Production crashed. Improve skills.");
  }

  const btn = document.createElement("button");
  btn.textContent = "â¬… EXIT TO PORTFOLIO";
  btn.onclick = () => {
    window.location.href = "index.html";
  };

  terminal.appendChild(btn);
}

// Start game
showQuestion();
</script>

</body>
</html>
