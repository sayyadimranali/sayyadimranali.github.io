<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Linux Survival Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    background: #0d1117;
    color: #c9d1d9;
    font-family: monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  #terminal {
    width: 90%;
    max-width: 800px;
    background: #161b22;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(0,255,0,0.15);
  }
  .line {
    margin-bottom: 10px;
  }
  button {
    background: #238636;
    color: #fff;
    border: none;
    padding: 10px 16px;
    margin: 5px 0;
    font-family: monospace;
    cursor: pointer;
    border-radius: 5px;
    display: block;
  }
  button:hover {
    background: #2ea043;
  }
</style>
</head>

<body>
<div id="terminal"></div>

<script>
const terminal = document.getElementById("terminal");

let step = 0;
let score = 0;

const incidents = [
  {
    q: "ðŸš¨ Disk is 100% full. What do you do first?",
    o: ["rm -rf /", "df -h", "shutdown -h now"],
    c: 2
  },
  {
    q: "ðŸš¨ Apache service is DOWN. Correct command?",
    o: ["kill -9 httpd", "systemctl restart httpd", "reboot"],
    c: 2
  },
  {
    q: "ðŸš¨ CPU usage is very high. First step?",
    o: ["top", "rm -rf /tmp", "poweroff"],
    c: 1
  },
  {
    q: "ðŸš¨ SSH login failing. What will you check?",
    o: ["chmod 777 /etc/shadow", "systemctl status sshd", "delete users"],
    c: 2
  },
  {
    q: "ðŸš¨ System running out of memory. What do you check first?",
    o: ["free -m", "rm -rf /var", "reboot immediately"],
    c: 1
  },
  {
    q: "ðŸš¨ You want to check which ports are listening. Command?",
    o: ["df -h", "ss -tuln", "uptime"],
    c: 2
  },
  {
    q: "ðŸš¨ Disk usage is high. How to find large files?",
    o: ["du -sh /*", "ls -l", "whoami"],
    c: 1
  },
  {
    q: "ðŸš¨ Service does not start on boot. What do you do?",
    o: ["systemctl enable service", "kill -9 service", "shutdown"],
    c: 1
  },
  {
    q: "ðŸš¨ You want to check system logs. Where do you look?",
    o: ["/etc/passwd", "/var/log", "/boot"],
    c: 2
  },
  {
    q: "ðŸš¨ Permission denied error on a script. What do you check?",
    o: ["chmod +x file", "rm file", "reboot server"],
    c: 1
  }
];

function clearScreen() {
  terminal.innerHTML = "";
}

function printLine(text) {
  const div = document.createElement("div");
  div.className = "line";
  div.textContent = text;
  terminal.appendChild(div);
}

function showQuestion() {
  clearScreen();
  printLine(`ðŸ§  Linux Survival Game (Question ${step + 1}/${incidents.length})`);
  printLine("");
  printLine(incidents[step].q);
  printLine("Please select the correct answer:");

  incidents[step].o.forEach((opt, index) => {
    const btn = document.createElement("button");
    btn.textContent = `${index + 1}. ${opt}`;
    btn.onclick = () => handleAnswer(index + 1);
    terminal.appendChild(btn);
  });
}

function handleAnswer(choice) {
  clearScreen();

  const correctIndex = incidents[step].c;
  const correctAnswer = incidents[step].o[correctIndex - 1];

  if (choice === correctIndex) {
    score++;
    printLine("âœ… Correct answer");
  } else {
    printLine("âŒ Wrong answer");
    printLine(`âœ… Correct answer: ${correctAnswer}`);
  }

  step++;

  setTimeout(() => {
    if (step < incidents.length) {
      showQuestion();
    } else {
      showResult();
    }
  }, 1200);
}

function showResult() {
  clearScreen();
  printLine("ðŸŽ¯ Game Completed!");
  printLine(`Your Score: ${score} / ${incidents.length}`);
  printLine("");

  const retryBtn = document.createElement("button");
  retryBtn.textContent = "ðŸ” Retry Game";
  retryBtn.onclick = () => {
    step = 0;
    score = 0;
    showQuestion();
  };

  const exitBtn = document.createElement("button");
  exitBtn.textContent = "â¬… Exit to Portfolio";
  exitBtn.onclick = () => {
    window.location.href = "index.html";
  };

  terminal.appendChild(retryBtn);
  terminal.appendChild(exitBtn);
}

// Start game
showQuestion();
</script>

</body>
</html>
